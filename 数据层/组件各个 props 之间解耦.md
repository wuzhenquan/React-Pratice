假设一个需求：按照中国、美国、英国、日本、加拿大的顺序分别显示 5 个当地时间，当地时间需由服务端获取，且显示格式不同。

这时我们可以设计一个时间组组件，可以接收五个国家的时间数据作为其 data prop，而展示一个当地时间至少需要英文唯一标识符（region）、中文显示名（name）、当前时间（time）、显示格式（format）四个属性，由此我们可以设计时间组组件的 data 属性为：

```javascript
data: [
  {
    region: 'china'
    name: '中国',
    time: 1481718888,
    format: 'MMMM Do YYYY, h:mm:ss a',
  },
  ...
]
```

看起来很完美，但事实真的是这样吗？我相信如果你把这份数据结构拿给后端同事看时，他一定会立刻指出一个问题，那就是后端数据库中是不会保存 name 及 format 字段的，因为这是由具体产品定义的展示逻辑，而接口只负责告诉你这个地区是哪里（region）以及这个地区的当前时间是多少（time）。事情到这里也许还不算那么糟糕，因为你可以在调用组件之前，把异步获取到的数据再重新格式化一遍，补上缺失的字段。但这时一个更棘手的问题来了，那就是接口返回的数组数据一般是不保证顺序的，你还需要按照产品的要求，在补充完缺失的字段后，对这个数组进行一次重排，以保证每一次渲染出来的地区都在同样的位置。

换一种方式，如果我们这样去设计时间组组件的 props 呢？

```javascript
{
  data: {
    china: {
       time: 1481718888,
    },
    ...
  },
  timeList: [
    {
      region: 'china',
      name: '中国',
      format: 'MMMM Do YYYY, h:mm:ss a',
    },
    ...
  ],
  ...
}
```

当我们将需要异步获取的 props 抽离之后，这个组件就变得非常 data & api friendly 了，我们通过**配置 timeList** 就可以完美地控制时间组的渲染规则及渲染顺序并且再也不需要去对接口返回的数据进行补全或定制了。甚至我们还可以通过设置默认值的方式，让组件先同步渲染出来，在异步的数据请求完成后，重绘数值部分，给予用户更好的视觉体验。

作者：诚身
链接：https://zhuanlan.zhihu.com/p/24207409
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。